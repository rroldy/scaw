DROP TABLE usuario IF EXISTS CASCADE;
CREATE TABLE usuario (
  id 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  usuario 	VARCHAR(30),
  password 	VARCHAR(50),
  tipo  	INTEGER,		/*	1 = administrador | 2 = usuario */
  aprobado 	VARCHAR(2)		/* 	S | N */
);
ALTER TABLE usuario ADD CONSTRAINT usuario_unique UNIQUE (usuario);

DROP TABLE tipoUsuario IF EXISTS;
CREATE TABLE tipoUsuario (
  id 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  nombre 	VARCHAR(30)
);
ALTER TABLE usuario ADD CONSTRAINT id_usuario_tipo FOREIGN KEY (tipo) REFERENCES tipoUsuario(id);

DROP TABLE tarea IF EXISTS CASCADE;
CREATE TABLE tarea (
  id 			INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  titulo 		VARCHAR(50),
  descripcion 	VARCHAR(250),
  estado  		INTEGER,	/* 	1 = pendiente | 2 = finalizado |   */
  creado_por 	INTEGER, 	/*	ID_USUARIO creador */
  tipoTarea 	INTEGER		/*  1 = privada | 2 = publica */
);

DROP TABLE tipoTarea IF EXISTS CASCADE;
CREATE TABLE tipoTarea (
  id 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  nombre 	VARCHAR(30)
);
DROP TABLE estado IF EXISTS CASCADE;
CREATE TABLE estado (
  id 		INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
  nombre 	VARCHAR(30)		
);

ALTER TABLE tarea ADD CONSTRAINT id_tarea_estado FOREIGN KEY (estado) REFERENCES estado(id);
ALTER TABLE tarea ADD CONSTRAINT id_tarea_usuario FOREIGN KEY (creado_por) REFERENCES usuario(id);
ALTER TABLE tarea ADD CONSTRAINT id_tarea_tipo FOREIGN KEY (tipoTarea) REFERENCES tipoTarea(id);